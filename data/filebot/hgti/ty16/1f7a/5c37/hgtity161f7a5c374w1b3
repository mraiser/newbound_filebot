{"data":{"css":".demo-card-image.mdl-card {\n  width: 256px;\n  height: 256px;\n  background-position: center top;\n  background-size:80%;\n  background-repeat:no-repeat;\n}\n.demo-card-image > .mdl-card__actions {\n  height: 52px;\n  padding: 16px;\n  background: rgba(0, 0, 0, 0.4);\n}\n.demo-card-image__filename {\n  color: #fff;\n  font-size: 14px;\n  font-weight: 500;\n}\n.deletefile{\n  position:absolute;\n  top:0px;\n  right:0px;\n  display:none;\n}\n.mdl-card__actions{\n  position:relative;\n}\n.clickme{\n  position:absolute;\n  width:100%;\n  height:100%;\n  margin:-20px;\n  display:none;\n}","data":[],"name":"filecard","js":"var filetypes = [ 'aac', 'ai', 'aiff', 'avi', 'bmp', 'c', 'cpp', 'css', 'dat', 'dmg', 'doc', 'dotx', 'dwg', 'dxf', 'eps', 'exe', 'flv', 'gif', 'h', 'hpp', 'html', 'ics', 'iso', 'java', 'jpg', 'js', 'key', 'less', 'mid', 'mp3', 'mp4', 'mpg', 'odf', 'ods', 'odt', 'otp', 'ots', 'ott', 'pdf', 'php', 'png', 'ppt', 'psd', 'py', 'qt', 'rar', 'rb', 'rtf', 'sass', 'scss', 'sql', 'tga', 'tgz', 'tiff', 'txt', 'wav', 'xls', 'xlsx', 'xml', 'yml', 'zip' ];\n\nvar me = this;\nvar ME = $('#'+me.UUID)[0];\n\nfunction mf(sel){ return $(ME).find(sel); }\n\nme.ready = function(){\n  console.log(ME.DATA);\n\n  var xx = ME.DATA;\n  var path = xx.path;\n  if (!path) {\n    path = xx.path = '/remote/'+xx.id;\n    xx.directory = true;\n    mf('.demo-card-image__filename').text(xx.name);\n  }\n  else mf('.demo-card-image__filename').text(path.substring(path.lastIndexOf('/')+1));\n  \n  if (!xx.name) xx.directory = true;\n  \n  var img;\n  if (xx.directory) {\n    img = 'folder.png';\n  }\n  else {\n      mf('.deletefile').css('display', 'block');\n      var yy = xx.name.lastIndexOf(\".\");\n      if (yy != -1) {\n          var zz = filetypes.indexOf(xx.name.substring(yy+1).toLowerCase());\n          if (zz != -1) img = 'icons/512px/'+filetypes[zz]+\".png\";\n      }\t\t\n    \n      mf('.deletefile').click(function(){\n        installControl(mf('.popupdiv')[0], 'metabot', 'confirmdialog', function(){}, {\n          title: 'Are you sure you want to delete this file? This cannot be undone.',\n          cb: function(val){\n            if (ME.DATA.peer){\n              json('../peerbot/remote/'+ME.DATA.peer+'/filebot/deletefile','path='+encodeURIComponent(ME.DATA.path)+'&peer=local', function(){\n                showFolder('/remote/'+ME.DATA.peer+ME.DATA.path.substring(0,ME.DATA.path.lastIndexOf('/')));\n              });\n            }\n            else{\n              json('../filebot/deletefile','path='+encodeURIComponent(ME.DATA.path)+'&peer=local', function(){\n                showFolder('/local'+ME.DATA.path.substring(0,ME.DATA.path.lastIndexOf('/')));\n              });\n            }\n          }\n        });\n      });\n    \n      if (xx.peer) mf('.clickme').css('display', 'block').prop('href', '../peerbot/remote/'+xx.peer+'/filebot/local'+ME.DATA.path);\n      else mf('.clickme').css('display', 'block').prop('href', '../filebot/local'+ME.DATA.path);\n    \n//      mf('.clickme\n  }\n  if (img == null) img = 'icons/512px/_blank.png';\n  img = '../filebot/img/'+img;\n  \n  mf('.demo-card-image.mdl-card').css('background-image', \"url('\"+img+\"')\");\n};\n","groups":"anonymous","ctl":"hgtity161f7a5c374w1b3","html":"<div class=\"demo-card-image mdl-card mdl-shadow--2dp\">\n  <div class=\"mdl-card__title mdl-card--expand\"><a target='_blank' class='clickme'>xxx<\/a><\/div>\n  <div class=\"mdl-card__actions\">\n    <span class=\"demo-card-image__filename\"><\/span>\n   <\/div>\n  <button class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab deletefile\">\n    <i class=\"material-icons\">delete<\/i>\n  <\/button>  \n <\/div>\n<div class='popupdiv'><\/div>","three":{"controls":[],"assets":[],"behaviors":[],"animations":[],"poses":[]},"db":"filebot","desc":""},"readers":["anonymous"],"id":"hgtity161f7a5c374w1b3","sessionid":"jvgvwg16b7a4d277bt3","time":1637257660368,"addr":"/0:0:0:0:0:0:0:1:56268","username":"admin"}
{"data":{"css":".powerheader .mdl-layout__drawer-button {\n  padding-top: 12px;\n  height: 40px;\n}\n\n.powerheader a {\n  text-decoration:none;\n  color: rgb(66,66,66);\n}\n\n.filebotbg{\n  background-color:white;\n}\n\n.mdl-button--fab.mdl-button--colored{\n  background-color:#83bc00;\n} \n\n.mdl-button--fab.mdl-button--colored:hover{\n  background-color:#b7ef49;\n}\n\n.menubutton {\n  position:absolute;\n  left:20px;\n  cursor:pointer;\n  border-bottom:none;\n}\n\n.page-content{\n  padding:20px;\n}\n\n.flex{\n  display:flex;\n  flex-wrap:wrap;\n  justify-content:left;\n  position:relative;\n}\n\n.mdl-chip{\n  margin-right:10px;\n  cursor:pointer;\n}\n\n.settingsbutton{\n  font-size:xx-large;\n  margin-right: -40px;\n  cursor:pointer;\n}\n\n.settingsmenu{\n  position: fixed;\n  top:16px;\n  right:16px;\n  z-index:100;\n  width:600px;\n  max-width:90%;\n  max-height:90%;\n  overflow-y:auto;\n  display:none;\n}\n\n.deletesettings{\n  position:absolute;\n  top:86px;\n  right:56px;\n}\n\n.sharename{\n  width:100px;\n}\n\n.addshareshere > tr {\n  height:40px;\n}","data":[],"name":"filebot","groups":"anonymous","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\n$(ME).find('.menubutton').click(function(){\n  window.location.href='../';\n});\n\nme.ready = function(){\n  showPath('/');\n  \n  $.getJSON('../filebot/fileinfo?path=/&children=false', function(result){\n    me.shares = result.list;\n    buildShares();\n  });\n};\n\nfunction buildShares(){\n  if (me.shares.length == 0) $(ME).find('.addsharebutton').click();\n  var newhtml = '<table class=\"mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp\"><thead><tr><th class=\"mdl-data-table__cell--non-numeric\">Name<\/th><th class=\"mdl-data-table__cell--non-numeric\">Path<\/th><\/tr><\/thead><tbody class=\"addshareshere\">';\n  for (var item in me.shares){\n    var rli = me.shares[item];\n    newhtml += buildShare(rli);\n  }\n  newhtml += '<\/tbody><\/table>';\n  $(ME).find('.sharetable').html(newhtml);\n  componentHandler.upgradeAllRegistered();\n}\n\nfunction buildShare(rli){\n  var id1 = guid();\n  var id2 = guid();\n  return '<tr><td class=\"mdl-data-table__cell--non-numeric\">'\n    + '<form action=\"#\"><div class=\"mdl-textfield mdl-js-textfield sharename\"><input class=\"mdl-textfield__input\" type=\"text\" id=\"'\n    + id1\n    + '\" value=\"'\n    + rli.name\n    +'\"><label class=\"mdl-textfield__label\" for=\"'\n    + id1\n    + '\">Share Name<\/label><\/div><\/form>'\n    + '<\/td><td class=\"mdl-data-table__cell--non-numeric\">'\n    + '<form action=\"#\"><div class=\"mdl-textfield mdl-js-textfield\"><input class=\"mdl-textfield__input\" type=\"text\" id=\"'\n    + id2\n    + '\" value=\"'\n    + rli.realpath\n    +'\"><label class=\"mdl-textfield__label\" for=\"'\n    + id2\n    + '\">Path to share<\/label><\/div><\/form>'\n    + '<\/td><\/tr>';\n}\n\n$(ME).find('.settingsbutton').click(function(){\n  $(ME).find('.deletesettings').css('display', 'none')\n  $(ME).find('.settingsmenu').css('width', '0px').css('display', 'block').animate({width:'600px'}, 500, function(){\n    $(ME).find('.deletesettings').css('display', 'block')\n  });\n});\n\n$(ME).find('.closesettings').click(function(){\n  $(ME).find('.deletesettings').css('display', 'none')\n  $(ME).find('.settingsmenu').animate({width:'0px'}, 500, function(){\n    $(ME).find('.settingsmenu').css('display', 'none');\n  });\n});\n\n$(ME).find('.savesettings').click(function(){\n  var settings = '';\n  $(ME).find('.sharetable').find('tr').each(function(x,y){\n    var vals = $(y).find('input');\n    if (vals[1]){\n      var name = vals[1].value;\n      var path = vals[2].value;\n      if (name != ''){\n        if (settings != '') settings += '\\r';\n        settings += name+'\\t'+path;\n      }\n    }\n  });\n  json(\"../filebot/updatefileshare\",\"v=\"+encodeURIComponent(settings), function(result){\n    if (result.status != 'ok') alert(result.msg);\n    else $(ME).find('.closesettings').click();\n    showFolder('/local');\n  });\n});\n\n$(ME).find('.deletesettings').click(function(){\n  $(ME).find('tr.is-selected').each(function(x,y){\n    var path = $($(y).find('input')[2]).val();\n    var rli = getByProperty(me.shares, 'realpath', path);\n    me.shares.splice(me.shares.indexOf(rli), 1);\n    buildShares();\n  });\n});\n\n$(ME).find('.addsharebutton').click(function(){\n  me.shares.push({name:'',realpath:''});\n  buildShares();\n});\n\nfunction showPath(path){\n  var data = { path:path };\n  installControl($(ME).find('.folderinfowrap')[0], 'filebot', 'folderinfo', function(){}, data);\n\n  var name = path == '/' ? 'filebot' : path.substring(path.lastIndexOf('/')+1);\n  var path2 = 'filebot_'+path.hashCode();\n\n  var chip = $(ME).find('.filebot'+path2);\n  if (chip[0]) while (chip.next()[0]) chip.next().remove();\n  else {\n    var el = $('<span class=\"mdl-chip filebot'+path2+'\"><span class=\"mdl-chip__text\">'+name+'<\/span><\/span>');\n    el.click(function(){ showPath(path, el); });\n    $(ME).find('.chips').append(el);\n  }\n}\n\nshowFolder = showPath;\n\nString.prototype.hashCode = function() {\n  var hash = 0, i, chr;\n  if (this.length === 0) return hash;\n  for (i = 0; i < this.length; i++) {\n    chr   = this.charCodeAt(i);\n    hash  = ((hash << 5) - hash) + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n};","ctl":"tpkthq15d32824e4do6","html":"<div class=\"mdl-layout mdl-js-layout mdl-layout--fixed-header\">  \n  <header class=\"mdl-layout__header powerheader\">\n    <div aria-expanded=\"false\" role=\"button\" tabindex=\"0\" class=\"mdl-layout__drawer-button\"><a class=\"material-icons\" href='../botmanager/index.html'>menu<\/a><\/div>\n    <div class=\"mdl-layout__header-row\">\n      <span class=\"mdl-layout-title\">Filebot<\/span>\n      <div class=\"mdl-layout-spacer\"><\/div>\n      <nav class=\"mdl-navigation\">\n        <a class=\"mdl-navigation__link material-icons settingsbutton\">settings<\/a>\n      <\/nav>\n    <\/div>\n  <\/header>\n  <main class=\"mdl-layout__content filebotbg\">\n    <div class=\"page-content\">\n      <div class='flex chips'><\/div>\n      <div class='flex folderinfowrap'><\/div>\n    <\/div>\n  <\/main>\n<\/div>\n\n<div class=\"settingsmenu mdl-card mdl-shadow--2dp\">\n  <div class=\"mdl-card__title\">\n    <h2 class=\"mdl-card__title-text\">Shared Files<\/h2>\n  <\/div>\n  <div class=\"mdl-card__supporting-text\">\n    <div class='sharetable'><\/div>\n    <br>\n    <center>\n      <button class=\"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored addsharebutton\">\n        <i class=\"material-icons\">add<\/i>\n      <\/button>\n    <\/center>\n    <button class=\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect deletesettings\">\n      <i class=\"material-icons\">delete<\/i>\n    <\/button>\n\n  <\/div>\n  <div class=\"mdl-card__actions mdl-card--border\">\n    <a class=\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect savesettings\">\n      Save\n    <\/a>\n  <\/div>\n  <div class=\"mdl-card__menu\">\n    <button class=\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect closesettings\">\n      <i class=\"material-icons\">close<\/i>\n    <\/button>\n  <\/div>\n<\/div>","three":{"controls":[]},"db":"filebot","desc":""},"readers":["anonymous"],"id":"tpkthq15d32824e4do6","sessionid":"jvgvwg16b7a4d277bt3","time":1580566717130,"addr":"/0:0:0:0:0:0:0:1:43434","username":"admin"}